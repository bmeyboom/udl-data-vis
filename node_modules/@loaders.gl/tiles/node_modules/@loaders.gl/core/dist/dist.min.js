!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){},function(e,t,n){"use strict";(function(e,r){n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));const o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=o.self||o.window||o.global||{},s=o.window||o.self||o.global||{},a=o.global||o.self||o.window||{},u=o.document||{},c="object"!=typeof r||"[object process]"!==String(r)||r.browser,l="function"==typeof importScripts,f=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);f&&parseFloat(f[1])}).call(this,n(7),n(3))},function(e,t){},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"==typeof r&&r},i=o.window||o.self||o.global,s=o.process||{};console}).call(this,n(7),n(3))},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),u=r[n];n<i;u=r[++n])y(u)||!v(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return m(o)||(o=l(e,o,r)),o}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,n);if(i)return i;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),S(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(x(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var c,v="",T=!1,j=["{","}"];(h(n)&&(T=!0,j=["[","]"]),x(n))&&(v=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(v=" "+RegExp.prototype.toString.call(n)),_(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+f(n)),0!==s.length||T&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=T?function(e,t,n,r,o){for(var i=[],s=0,a=t.length;s<a;++s)k(t,String(s))?i.push(d(e,t,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,n,r,o,!0))})),i}(e,n,r,a,s):s.map((function(t){return d(e,n,r,a,t,T)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,v,j)):j[0]+v+j[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),k(r,o)||(s="["+o+"]"),a||(e.seen.indexOf(u.value)<0?(a=y(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),w(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return"number"==typeof e}function m(e){return"string"==typeof e}function w(e){return void 0===e}function b(e){return v(e)&&"[object RegExp]"===T(e)}function v(e){return"object"==typeof e&&null!==e}function _(e){return v(e)&&"[object Date]"===T(e)}function S(e){return v(e)&&("[object Error]"===T(e)||e instanceof Error)}function x(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function j(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(w(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=w,t.isRegExp=b,t.isObject=v,t.isDate=_,t.isError=S,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(23);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[j(e.getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(24),t._extend=function(e,t){if(!t||!v(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!=typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=E,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(R,t,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(3))},function(e,t,n){"use strict";(function(e){function r(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==e&&e.hrtime){const n=e.hrtime();t=1e3*n[0]+n[1]/1e6}else t=Date.now();return t}n.d(t,"a",(function(){return r}))}).call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,,function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(15);function o(){return!("object"==typeof e&&"[object process]"===String(e)&&!e.browser)||Object(r.a)()}}).call(this,n(3))},function(e,t,n){"use strict";(function(e){function r(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"==typeof e.versions&&Boolean(e.versions.electron))return!0;const n="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,r=t||n;return!!(r&&r.indexOf("Electron")>=0)}n.d(t,"a",(function(){return r}))}).call(this,n(3))},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return o}));"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document,"object"!=typeof r||"[object process]"!==String(r)||r.browser;const o="undefined"!=typeof window&&void 0!==window.orientation,i=void 0!==r&&r.version&&/v([0-9]*)/.exec(r.version);i&&parseFloat(i[1])}).call(this,n(7),n(3))},function(e,t){},function(e,t,n){(function(t){const r=n(26),o="undefined"==typeof window?t:window;o.loaders=o.loaders||{},e.exports=Object.assign(o.loaders,r)}).call(this,n(7))},,,,,function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){},function(e,t,n){"use strict";n.r(t),n.d(t,"fetchFile",(function(){return R})),n.d(t,"readArrayBuffer",(function(){return H})),n.d(t,"readFileSync",(function(){return K})),n.d(t,"writeFile",(function(){return X})),n.d(t,"writeFileSync",(function(){return ee})),n.d(t,"setLoaderOptions",(function(){return Le})),n.d(t,"registerLoaders",(function(){return Fe})),n.d(t,"selectLoader",(function(){return De})),n.d(t,"selectLoaderSync",(function(){return Ne})),n.d(t,"parse",(function(){return vt})),n.d(t,"parseSync",(function(){return _t})),n.d(t,"parseInBatches",(function(){return St})),n.d(t,"load",(function(){return xt})),n.d(t,"loadInBatches",(function(){return Tt})),n.d(t,"encode",(function(){return Ot})),n.d(t,"encodeSync",(function(){return At})),n.d(t,"encodeInBatches",(function(){return Et})),n.d(t,"encodeText",(function(){return kt})),n.d(t,"encodeURLtoURL",(function(){return Rt})),n.d(t,"save",(function(){return Bt})),n.d(t,"saveSync",(function(){return Ct})),n.d(t,"setPathPrefix",(function(){return s})),n.d(t,"getPathPrefix",(function(){return a})),n.d(t,"resolvePath",(function(){return u})),n.d(t,"RequestScheduler",(function(){return Nt})),n.d(t,"makeIterator",(function(){return pt})),n.d(t,"makeStream",(function(){return Wt})),n.d(t,"makeDOMStream",(function(){return Ut})),n.d(t,"makeNodeStream",(function(){return $t.makeNodeStream})),n.d(t,"NullWorkerLoader",(function(){return qt})),n.d(t,"NullLoader",(function(){return Ht})),n.d(t,"JSONLoader",(function(){return Qt})),n.d(t,"_fetchProgress",(function(){return Gt})),n.d(t,"_BrowserFileSystem",(function(){return Yt})),n.d(t,"_unregisterLoaders",(function(){return Me})),n.d(t,"isBrowser",(function(){return Q.c})),n.d(t,"isWorker",(function(){return Q.d})),n.d(t,"self",(function(){return Q.e})),n.d(t,"window",(function(){return Q.f})),n.d(t,"global",(function(){return Q.b})),n.d(t,"document",(function(){return Q.a})),n.d(t,"assert",(function(){return Y})),n.d(t,"forEach",(function(){return lt})),n.d(t,"concatenateArrayBuffersAsync",(function(){return ft})),n.d(t,"makeTextDecoderIterator",(function(){return Kt})),n.d(t,"makeTextEncoderIterator",(function(){return Zt})),n.d(t,"makeLineIterator",(function(){return Xt})),n.d(t,"makeNumberedLineIterator",(function(){return en})),n.d(t,"isPureObject",(function(){return d})),n.d(t,"isPromise",(function(){return h})),n.d(t,"isIterable",(function(){return p})),n.d(t,"isAsyncIterable",(function(){return y})),n.d(t,"isIterator",(function(){return g})),n.d(t,"isResponse",(function(){return m})),n.d(t,"isReadableStream",(function(){return b})),n.d(t,"isWritableStream",(function(){return v}));var r={};n.r(r),n.d(r,"isSupported",(function(){return M})),n.d(r,"open",(function(){return I})),n.d(r,"close",(function(){return D})),n.d(r,"read",(function(){return N})),n.d(r,"readFile",(function(){return U})),n.d(r,"readFileSync",(function(){return z})),n.d(r,"writeFile",(function(){return W})),n.d(r,"writeFileSync",(function(){return $})),n.d(r,"_readToArrayBuffer",(function(){return q}));let o="";const i={};function s(e){o=e}function a(){return o}function u(e){for(const t in i)if(e.startsWith(t)){const n=i[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e=`${o}${e}`),e}const c=e=>"boolean"==typeof e,l=e=>"function"==typeof e,f=e=>null!==e&&"object"==typeof e,d=e=>f(e)&&e.constructor==={}.constructor,h=e=>f(e)&&l(e.then),p=e=>e&&"function"==typeof e[Symbol.iterator],y=e=>e&&"function"==typeof e[Symbol.asyncIterator],g=e=>e&&l(e.next),m=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,w=e=>"undefined"!=typeof Blob&&e instanceof Blob,b=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||f(e)&&l(e.tee)&&l(e.cancel)&&l(e.getReader))(e)||(e=>f(e)&&l(e.read)&&l(e.pipe)&&c(e.readable))(e),v=e=>(e=>f(e)&&l(e.abort)&&l(e.getWriter))(e)||(e=>f(e)&&l(e.end)&&l(e.write)&&c(e.writable))(e),_=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,S=/^([-\w.]+\/[-\w.+]+)/;function x(e){const t=S.exec(e);return t?t[1]:e}function T(e){const t=_.exec(e);return t?t[1]:""}const j=/\?.*/;function O(e){if(m(e)){const t=A(e.url||"");return{url:t,type:x(e.headers.get("content-type")||"")||T(t)}}return w(e)?{url:A(e.name||""),type:e.type||""}:"string"==typeof e?{url:A(e),type:T(e)}:{url:"",type:""}}function A(e){return e.replace(j,"")}async function k(e){if(m(e))return e;const t={},n=function(e){return m(e)?e.headers["content-length"]||-1:w(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const{url:r,type:o}=O(e);o&&(t["content-type"]=o);const i=await async function(e){if("string"==typeof e)return"data:,"+e.slice(0,5);if(e instanceof Blob){const t=e.slice(0,5);return await new Promise(e=>{const n=new FileReader;n.onload=t=>{var n;return e(null==t||null===(n=t.target)||void 0===n?void 0:n.result)},n.readAsDataURL(t)})}if(e instanceof ArrayBuffer){const t=e.slice(0,5);return"data:base64,"+function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return btoa(t)}(t)}return null}(e);i&&(t["x-first-bytes"]=i),"string"==typeof e&&(e=(new TextEncoder).encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function E(e){if(!e.ok){const t=await async function(e){let t=`Failed to fetch resource ${e.url} (${e.status}): `;try{const n=e.headers.get("Content-Type");let r=e.statusText;n.includes("application/json")&&(r+=" "+await e.text()),t+=r,t=t.length>60?t.slice(60)+"...":t}catch(e){}return t}(e);throw new Error(t)}}async function R(e,t){if("string"==typeof e){e=u(e);let n=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(n=t.fetch),await fetch(e,n)}return await k(e)}var L=n(0),B=n.n(L),C=n(13),P=n(5);const F=e=>()=>{throw new Error(e+" not available in browser")},M=Boolean(B.a),I=null!==B.a&&void 0!==B.a&&B.a.open?Object(P.promisify)(B.a.open):F("fs.open"),D=null!==B.a&&void 0!==B.a&&B.a.close?Object(P.promisify)(B.a.close):F("fs.close"),N=null!==B.a&&void 0!==B.a&&B.a.read?Object(P.promisify)(B.a.read):F("fs.read"),U=null!==B.a&&void 0!==B.a&&B.a.readFile?Object(P.promisify)(B.a.readFile):F("fs.readFile"),z=null!==B.a&&void 0!==B.a&&B.a.readFileSync?B.a.readFileSync:F("fs.readFileSync"),W=null!==B.a&&void 0!==B.a&&B.a.writeFile?Object(P.promisify)(B.a.writeFile):F("fs.writeFile"),$=null!==B.a&&void 0!==B.a&&B.a.writeFileSync?B.a.writeFileSync:F("fs.writeFileSync");async function q(e,t,n){const r=Buffer.alloc(n),{bytesRead:o}=await N(e,r,0,n,t);if(o!==n)throw new Error("fs.read failed");return Object(C.toArrayBuffer)(r)}async function H(e,t,n){if("number"==typeof e)return await r._readToArrayBuffer(e,t,n);e instanceof Blob||(e=new Blob([e]));const o=e.slice(t,t+n);return await async function(e){return await new Promise((t,n)=>{const r=new FileReader;r.onload=e=>{var n;return t(null==e||null===(n=e.target)||void 0===n?void 0:n.result)},r.onerror=e=>n(e),r.readAsArrayBuffer(e)})}(o)}var Q=n(1),J=n(2);function G(e){if(J.toArrayBuffer&&(e=J.toArrayBuffer(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function V(...e){const t=e.map(e=>e instanceof ArrayBuffer?new Uint8Array(e):e),n=t.reduce((e,t)=>e+t.byteLength,0),r=new Uint8Array(n);let o=0;for(const e of t)r.set(e,o),o+=e.byteLength;return r.buffer}function Y(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function K(e,t={}){if(e=u(e),!Q.c){const n=r.readFileSync(e,t);return"string"!=typeof n?G(n):n}return t.nothrow||Y(!1),null}function Z(e){return J.toBuffer?J.toBuffer(e):e}async function X(e,t,n){e=u(e),Q.c||await r.writeFile(e,Z(t),{flag:"w"}),Y(!1)}function ee(e,t,n){e=u(e),Q.c||r.writeFileSync(e,Z(t),{flag:"w"}),Y(!1)}var te=n(14);const ne=Object(te.a)();class re{constructor(e,t,n="sessionStorage"){this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(n),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function oe(e,t,n,r=600){const o=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));const i=e.width*n,s=e.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(o,");"),"background-size:".concat(i,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}const ie={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function se(e){return"string"==typeof e?ie[e.toUpperCase()]||ie.WHITE:e}function ae(e,t){if(!e)throw new Error(t||"Assertion failed")}var ue=n(4);function ce(){let e;if(ne&&ue.b.performance)e=ue.b.performance.now();else if(ue.a.hrtime){const t=ue.a.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const le={debug:ne&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},fe={enabled:!0,level:0};function de(){}const he={},pe={once:!0};function ye(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}class ge{constructor({id:e}={id:""}){this.id=e,this.VERSION="3.0.7",this._startTs=ce(),this._deltaTs=ce(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new re("__probe-".concat(this.id,"__"),fe),this.userData={},this.timeStamp("".concat(this.id," started")),function(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n);for(const n of r)"function"==typeof e[n]&&(t.find(e=>n===e)||(e[n]=e[n].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ce()-this._startTs).toPrecision(10))}getDelta(){return Number((ce()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,t){ae(e,t)}warn(e){return this._getLogFunction(0,e,le.warn,arguments,pe)}error(e){return this._getLogFunction(0,e,le.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,le.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,le.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,le.debug||le.info,arguments,pe)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||de,n&&[n],{tag:ye(t)}):de}image({logLevel:e,priority:t,image:r,message:o="",scale:i=1}){return this._shouldLog(e||t)?ne?function({image:e,message:t="",scale:n=1}){if("string"==typeof e){const r=new Image;return r.onload=()=>{const e=oe(r,t,n);console.log(...e)},r.src=e,de}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...oe(e,t,n)),de;if("canvas"===r.toLowerCase()){const r=new Image;return r.onload=()=>console.log(...oe(r,t,n)),r.src=e.toDataURL(),de}return de}({image:r,message:o,scale:i}):function({image:e,message:t="",scale:r=1}){let o=null;try{o=n(25)}catch(e){}if(o)return()=>o(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then(e=>console.log(e));return de}({image:r,message:o,scale:i}):de}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||de)}group(e,t,n={collapsed:!1}){n=we({logLevel:e,message:t,opts:n});const{collapsed:r}=n;return n.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}groupCollapsed(e,t,n={}){return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||de)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=me(e)}_getLogFunction(e,t,n,r=[],o){if(this._shouldLog(e)){o=we({logLevel:e,message:t,args:r,opts:o}),ae(n=n||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=ce();const i=o.tag||o.message;if(o.once){if(he[i])return de;he[i]=ce()}return t=function(e,t,n){if("string"==typeof t){const s=n.time?function(e,t=8){const n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(n.total)):"";t=n.time?"".concat(e,": ").concat(s,"  ").concat(t):"".concat(e,": ").concat(t),r=t,o=n.color,i=n.background,ne||"string"!=typeof r||(o&&(o=se(o),r="[".concat(o,"m").concat(r,"[39m")),i&&(o=se(i),r="[".concat(i+10,"m").concat(r,"[49m"))),t=r}var r,o,i;return t}(this.id,o.message,o),n.bind(console,t,...o.args)}return de}}function me(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return ae(Number.isFinite(t)&&t>=0),t}function we(e){const{logLevel:t,message:n}=e;e.logLevel=me(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(e.args=r,typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const o=typeof e.message;return ae("string"===o||"object"===o),Object.assign(e,e.opts)}ge.VERSION="3.0.7";const be=new ge({id:"loaders.gl"});class ve{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}const _e={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){var e,t,n;n=void 0,(t="console")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Se={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function xe(){Q.b.loaders=Q.b.loaders||{};const{loaders:e}=Q.b;return e._state=e._state||{},e._state}const Te=()=>{const e=xe();return e.globalOptions=e.globalOptions||{..._e},e.globalOptions};function je(e,t,n,r){return n=n||[],function(e,t){Ae(e,null,_e,Se,t);for(const n of t){const r=e&&e[n.id]||{},o=n.options&&n.options[n.id]||{},i=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Ae(r,n.id,o,i,t)}}(e,n=Array.isArray(n)?n:[n]),Ee(t,e,r)}function Oe(e,t){const n=Te(),r=e||n;return"function"==typeof r.fetch?r.fetch:f(r.fetch)?e=>R(e,r):null!=t&&t.fetch?null==t?void 0:t.fetch:R}function Ae(e,t,n,r,o){const i=t||"Top level",s=t?t+".":"";for(const a in e){const u=!t&&f(e[a]),c="baseUri"===a&&!t,l="workerUrl"===a&&t;if(!(a in n)&&!c&&!l)if(a in r)be.warn(`${i} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!u){const e=ke(a,o);be.warn(`${i} loader option '${s}${a}' not recognized. ${e}`)()}}}function ke(e,t){const n=e.toLowerCase();let r="";for(const o of t)for(const t in o.options){if(e===t)return`Did you mean '${o.id}.${t}'?`;const i=t.toLowerCase();(n.startsWith(i)||i.startsWith(n))&&(r=r||`Did you mean '${o.id}.${t}'?`)}return r}function Ee(e,t,n){const r={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(r,n),null===r.log&&(r.log=new ve),Re(r,Te()),Re(r,t),r}function Re(e,t){for(const n in t)if(n in t){const r=t[n];d(r)&&d(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Le(e){!function(e){const t=xe(),n=Te();t.globalOptions=Ee(n,e)}(e)}function Be(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function Ce(e){var t,n;let r;return Y(e,"null loader"),Y(Be(e),"invalid loader"),Array.isArray(e)&&(r=e[1],e=e[0],e={...e,options:{...e.options,...r}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(n=e)&&void 0!==n&&n.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const Pe=()=>{const e=xe();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function Fe(e){const t=Pe();e=Array.isArray(e)?e:[e];for(const n of e){const e=Ce(n);t.find(t=>e===t)||t.unshift(e)}}function Me(){xe().loaderRegistry=[]}const Ie=/\.([^.]+)$/;async function De(e,t=[],n,r){if(!Ue(e))return null;let o=Ne(e,t,{...n,nothrow:!0},r);if(o)return o;if(w(e)&&(o=Ne(e=await e.slice(0,10).arrayBuffer(),t,n,r)),!(o||null!=n&&n.nothrow))throw new Error(ze(e));return o}function Ne(e,t=[],n,r){if(!Ue(e))return null;if(t&&!Array.isArray(t))return Ce(t);let o=[];t&&(o=o.concat(t)),null!=n&&n.ignoreRegisteredLoaders||o.push(...Pe()),function(e){for(const t of e)Ce(t)}(o);const i=function(e,t,n,r){const{url:o,type:i}=O(e),s=o||(null==r?void 0:r.url);let a=null;null!=n&&n.mimeType&&(a=We(t,null==n?void 0:n.mimeType));return a=a||function(e,t){const n=t&&Ie.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,s),a=a||We(t,i),a=a||function(e,t){if(!t)return null;for(const n of e)if("string"==typeof t){if($e(t,n))return n}else if(ArrayBuffer.isView(t)){if(qe(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(qe(t,0,n))return n}return null}(t,e),a=a||We(t,null==n?void 0:n.fallbackMimeType),a}(e,o,n,r);if(!(i||null!=n&&n.nothrow))throw new Error(ze(e));return i}function Ue(e){return!(e instanceof Response&&204===e.status)}function ze(e){const{url:t,type:n}=O(e);let r="No valid loader found";return e&&(r+=` data: "${function(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return He(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return He(e,0,t)}return""}(e)}", contentType: "${n}"`),t&&(r+=" url: "+t),r}function We(e,t){for(const n of e){if(n.mimeTypes&&n.mimeTypes.includes(t))return n;if(t==="application/x."+n.id)return n}return null}function $e(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some(t=>e.startsWith(t))}function qe(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),o=new Uint8Array(t);for(let e=0;e<r.length;++e)if(r[e]!==o[e])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e,n);case"string":const o=He(e,t,r.length);return r===o;default:return!1}}(e,t,n,r))}function He(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let o="";for(let e=0;e<n;e++)o+=String.fromCharCode(r.getUint8(t+e));return o}function Qe(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}var Je=n(16);const Ge=new Map;function Ve(e){Qe(e.source&&!e.url||!e.source&&e.url);let t=Ge.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Ye((t=e,`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var t}(e.url),Ge.set(e.url,t)),e.source&&(t=Ye(e.source),Ge.set(e.source,t))),Qe(t),t}function Ye(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Ke(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xe=()=>{};class et{static isSupported(){return"undefined"!=typeof Worker}constructor(e){Ze(this,"name",void 0),Ze(this,"source",void 0),Ze(this,"url",void 0),Ze(this,"terminated",!1),Ze(this,"worker",void 0),Ze(this,"onMessage",void 0),Ze(this,"onError",void 0),Ze(this,"_loadableURL","");const{name:t,source:n,url:r}=e;Qe(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=Xe,this.onError=e=>console.log(e),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=Xe,this.onError=Xe,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||function e(t,n=!0,r){const o=r||new Set;if(t){if(Ke(t))o.add(t);else if(Ke(t.buffer))o.add(t.buffer);else if(ArrayBuffer.isView(t));else if(n&&"object"==typeof t)for(const r in t)e(t[r],n,o)}else;return void 0===r?Array.from(o):[]}(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name}. `,e.message&&(t+=e.message+" in "),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=Ve({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class nt{constructor(e,t){tt(this,"name",void 0),tt(this,"workerThread",void 0),tt(this,"isRunning",void 0),tt(this,"result",void 0),tt(this,"_resolve",void 0),tt(this,"_reject",void 0),this.name=e,this.workerThread=t,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Qe(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Qe(this.isRunning),this.isRunning=!1,this._reject(e)}}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ot{constructor(e){rt(this,"name","unnamed"),rt(this,"source",void 0),rt(this,"url",void 0),rt(this,"maxConcurrency",1),rt(this,"maxMobileConcurrency",1),rt(this,"onDebug",()=>{}),rt(this,"reuseWorkers",!0),rt(this,"props",{}),rt(this,"jobQueue",[]),rt(this,"idleQueue",[]),rt(this,"count",0),rt(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t=((e,t,n)=>e.done(n)),n=((e,t)=>e.error(t))){const r=new Promise(r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new nt(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new et({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Je.a?this.maxMobileConcurrency:this.maxConcurrency}}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const st={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class at{static isSupported(){return et.isSupported()}static getWorkerFarm(e={}){return at._workerFarm=at._workerFarm||new at({}),at._workerFarm.setProps(e),at._workerFarm}constructor(e){it(this,"props",void 0),it(this,"workerPools",new Map),this.props={...st},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let o=this.workerPools.get(t);return o||(o=new ot({name:t,source:n,url:r}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}it(at,"_workerFarm",void 0);async function ut(e,t,n,r,o){const i=e.id,s=function(e,t={}){const n=t[e.id]||{},r=e.id+"-worker.js";let o=n.workerUrl;if("test"===t._workerType&&(o=`modules/${e.module}/dist/${r}`),!o){let t=e.version;"latest"===t&&(t="latest");const n=t?"@"+t:"";o=`https://unpkg.com/@loaders.gl/${e.module}${n}/dist/${r}`}return Qe(o),o}(e,n),a=at.getWorkerFarm(n).getWorkerPool({name:i,url:s});n=JSON.parse(JSON.stringify(n));const u=await a.startJob("process-on-worker",ct.bind(null,o));u.postMessage("process",{input:t,options:n});const c=await u.result;return await c.result}async function ct(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(r.error);break;case"process":const{id:o,input:i,options:s}=r;try{const n=await e(i,s);t.postMessage("done",{id:o,result:n})}catch(e){const n=e instanceof Error?e.message:"unknown error";t.postMessage("error",{id:o,error:n})}break;default:console.warn("parse-with-worker unknown message "+n)}}async function lt(e,t){for(;;){const{done:n,value:r}=await e.next();if(n)return void e.return();if(t(r))return}}async function ft(e){const t=[];for await(const n of e)t.push(n);return V(...t)}const dt=262144;function ht(e,t){return Q.c?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();null!=t&&t._streamReadAhead&&(r=n.read());const{done:o,value:i}=await e;if(o)return;yield G(i)}}catch(e){n.releaseLock()}}(e,t):async function*(e,t){for await(const t of e)yield G(t)}(e)}function pt(e,t){if("string"==typeof e)return function*(e,t){const n=(null==t?void 0:t.chunkSize)||262144;let r=0;const o=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),i=e.slice(r,r+t);r+=t,yield o.encode(i)}}(e,t);if(e instanceof ArrayBuffer)return function*(e,t={}){const{chunkSize:n=dt}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),o=new ArrayBuffer(t),i=new Uint8Array(e,r,t);new Uint8Array(o).set(i),r+=t,yield o}}(e,t);if(w(e))return async function*(e,t){const n=(null==t?void 0:t.chunkSize)||1048576;let r=0;for(;r<e.size;){const t=r+n,o=await e.slice(r,t).arrayBuffer();r=t,yield o}}(e,t);if(b(e))return ht(e,t);if(m(e)){return ht(e.body,t)}throw new Error("makeIterator")}const yt="Cannot convert supplied data type";function gt(e,t,n){if(t.text&&"string"==typeof e)return e;var r;if((r=e)&&"object"==typeof r&&r.isBuffer&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;if(t.text&&!t.binary){return new TextDecoder("utf8").decode(n)}return n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary){return new TextDecoder("utf8").decode(e)}let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error(yt)}async function mt(e,t){if(g(e))return e;if(m(e)){const n=e;await E(n);return pt(await n.body,t)}return w(e)||b(e)?pt(e,t):y(e)?e[Symbol.asyncIterator]():function(e){if(ArrayBuffer.isView(e))return function*(){yield e.buffer}();if(e instanceof ArrayBuffer)return function*(){yield e}();if(g(e))return e;if(p(e))return e[Symbol.iterator]();throw new Error(yt)}(e)}function wt(e,t,n=null){if(n)return n;const r={fetch:Oe(t,e),...e};return Array.isArray(r.loaders)||(r.loaders=null),r}function bt(e,t){if(!t&&e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:null}async function vt(e,t,n,r){Qe(!r||"object"==typeof r),!t||Array.isArray(t)||Be(t)||(r=void 0,n=t,t=void 0),e=await e,n=n||{};const{url:o}=O(e),i=bt(t,r),s=await De(e,i,n);return s?(r=wt({url:o,parse:vt,loaders:i},n=je(n,s,i,o),r),await async function(e,t,n,r){if(function(e,t="3.0.7"){Qe(e,"no worker provided");const n=e.version}(e),t=await async function(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||r)return gt(e,t);if(w(e)&&(e=await k(e)),m(e)){const n=e;return await E(n),t.binary?await n.arrayBuffer():await n.text()}if(b(e)&&(e=pt(e,n)),p(e)||y(e))return ft(e);throw new Error(yt)}(t,e,n),e.parseTextSync&&"string"==typeof t)return n.dataType="text",e.parseTextSync(t,n,r,e);if(function(e,t){return!!at.isSupported()&&(e.worker&&(null==t?void 0:t.worker))}(e,n))return await ut(e,t,n,0,vt);if(e.parseText&&"string"==typeof t)return await e.parseText(t,n,r,e);if(e.parse)return await e.parse(t,n,r,e);throw Qe(!e.parseSync),new Error(e.id+" loader - no parser found and worker is disabled")}(s,e,n,r)):null}function _t(e,t,n,r){Y(!r||"object"==typeof r),Array.isArray(t)||Be(t)||(r=void 0,n=t,t=void 0),n=n||{};const o=bt(t,r),i=Ne(e,o,n);if(!i)return null;n=je(n,i,o);const{url:s}=O(e);return function(e,t,n,r){if(t=gt(t,e),e.parseTextSync&&"string"==typeof t)return e.parseTextSync(t,n);if(e.parseSync&&t instanceof ArrayBuffer)return e.parseSync(t,n,r);throw new Error(`${e.name} loader: 'parseSync' not supported by this loader, use 'parse' instead. ${r.url||""}`)}(i,e,n,r=wt({url:s,parseSync:_t,parse:()=>{throw new Error("parseSync called parse")},loaders:t},n))}async function St(e,t,n,r){Y(!r||"object"==typeof r),Array.isArray(t)||Be(t)||(r=void 0,n=t,t=void 0),e=await e,n=n||{};const{url:o}=O(e),i=await De(e,t,n);return i?(r=wt({url:o,parseInBatches:St,parse:vt,loaders:t},n=je(n,i,t,o),r),await async function(e,t,n,r){const o=await async function(e,t,n,r){const o=await mt(t,n),i=await async function(e,t=[]){let n=e;for await(const e of t)n=e(n);return n}(o,(null==n?void 0:n.transforms)||[]);if(e.parseInBatches)return e.parseInBatches(i,n,r);return async function*(){const t=await ft(i),o=await vt(t,e,{...n,mimeType:e.mimeTypes[0]},r),s={mimeType:e.mimeTypes[0],shape:Array.isArray(o)?"row-table":"unknown",batchType:"data",data:o,length:Array.isArray(o)?o.length:1};yield s}()}(e,t,n,r);if(!n.metadata)return o;const i={batchType:"metadata",metadata:{_loader:e,_context:r},data:[],bytesUsed:0};return async function*(e){yield i,yield*e}(o)}(i,e,n,r)):null}async function xt(e,t,n,r){Array.isArray(t)||Be(t)||(void 0,n=t,t=void 0);const o=Oe(n);let i=e;return"string"==typeof e&&(i=await o(e)),w(e)&&(i=await o(e)),await vt(i,t,n)}function Tt(e,t,n,r){Array.isArray(t)||Be(t)||(void 0,n=t,t=null);const o=Oe(n||{});if(!Array.isArray(e))return jt(e,t,n,o);return e.map(e=>jt(e,t,n,o))}async function jt(e,t,n,r){if("string"==typeof e){const o=e,i=await r(o);return await St(i,t,n)}return await St(e,t,n)}async function Ot(e,t,n){if(t.encode)return await t.encode(e,n);if(t.encodeSync)return t.encodeSync(e,n);if(t.encodeText)return(new TextEncoder).encode(await t.encodeText(e,n));if(t.encodeInBatches){const r=Et(e,t,n),o=[];for await(const e of r)o.push(e);return V(...o)}if(!Q.c&&t.encodeURLtoURL){const r=Lt("input");await X(r,e);const o=Lt("output"),i=await Rt(r,o,t,n);return(await R(i)).arrayBuffer()}throw new Error("Writer could not encode data")}function At(e,t,n){if(t.encodeSync)return t.encodeSync(e,n);throw new Error("Writer could not synchronously encode data")}async function kt(e,t,n){if(t.text&&t.encodeText)return await t.encodeText(e,n);if(t.text&&(t.encode||t.encodeInBatches)){const r=await Ot(e,t,n);return(new TextDecoder).decode(r)}throw new Error("Writer could not encode data as text")}function Et(e,t,n){if(t.encodeInBatches){const r=function(e){return[{table:e,start:0,end:e.length}]}(e);return t.encodeInBatches(r,n)}throw new Error("Writer could not encode data in batches")}async function Rt(e,t,n,r){if(e=u(e),t=u(t),Q.c||!n.encodeURLtoURL)throw new Error;return await n.encodeURLtoURL(e,t,r)}function Lt(e){return"/tmp/"+e}async function Bt(e,t,n,r){const o=await Ot(e,n,r);return await X(t,o)}function Ct(e,t,n,r){return ee(t,At(e,n,r))}var Pt=n(6);class Ft{constructor(e,t){this.name=e,this.type=t,this.sampleSize=1,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Object(Pt.a)(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Object(Pt.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Mt{constructor({id:e,stats:t}){this.id=e,this.stats={},this._initializeStats(t),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(e=>this._getOrCreate(e))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:n}=e;return this.stats[t]||(this.stats[t]=e instanceof Ft?e:new Ft(t,n)),this.stats[t]}}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Dt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class Nt{constructor(e={}){It(this,"props",void 0),It(this,"stats",void 0),It(this,"activeRequestCount",0),It(this,"requestQueue",[]),It(this,"requestMap",new Map),It(this,"deferredUpdate",null),this.props={...Dt,...e},this.stats=new Mt({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e,t=(()=>0)){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:t},r=new Promise(e=>(n.resolve=e,n));return this.requestQueue.push(n),this.requestMap.set(e,r),this._issueNewRequests(),r}_issueRequest(e){const{handle:t,resolve:n}=e;let r=!1;const o=()=>{r||(r=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const n=e[t];this._updateRequest(n)||(e.splice(t,1),this.requestMap.delete(n.handle),t--)}e.sort((e,t)=>e.priority-t.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}function Ut(e,t){const n=e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]();return new ReadableStream({type:"bytes",async pull(e){try{const{done:t,value:r}=await n.next();t?e.close():e.enqueue(new Uint8Array(r))}catch(t){e.error(t)}},async cancel(){var e;await(null==n||null===(e=n.return)||void 0===e?void 0:e.call(n))}},{highWaterMark:2**24,...t})}var zt=n(17);function Wt(e,t){return Q.c?Ut(e,t):Object(zt.makeNodeStream)(e,t)}var $t=n(12);const qt={name:"Null loader",id:"null",module:"core",version:"3.0.7",worker:!0,mimeTypes:["application/x.empty"],extensions:["null"],tests:[()=>!1],options:{null:{}}},Ht={name:"Null loader",id:"null",module:"core",version:"3.0.7",mimeTypes:["application/x.empty"],extensions:["null"],parse:async e=>e,parseSync:e=>e,parseInBatches:async function*(e){for await(const t of e)yield t},tests:[()=>!1],options:{null:{}}},Qt={name:"JSON",id:"json",module:"json",version:"3.0.7",extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:Jt,parse:async e=>Jt((new TextDecoder).decode(e)),options:{}};function Jt(e){return JSON.parse(e)}async function Gt(e,t,n=(()=>{}),r=(()=>{})){if(!(e=await e).ok)return e;const o=e.body;if(!o)return e;const i=e.headers.get("content-length")||0,s=i&&parseInt(i);if(!(i>0))return e;if("undefined"==typeof ReadableStream||!o.getReader)return e;const a=new ReadableStream({async start(e){const i=o.getReader();await async function e(t,n,r,o,i,s,a){try{const{done:u,value:c}=await n.read();if(u)return s(),void t.close();r+=c.byteLength;const l=Math.round(r/o*100);i(l,{loadedBytes:r,totalBytes:o}),t.enqueue(c),await e(t,n,r,o,i,s,a)}catch(e){t.error(e),a(e)}}(e,i,0,s,t,n,r)}});return new Response(a)}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Yt{constructor(e,t){Vt(this,"_fetch",void 0),Vt(this,"files",{}),Vt(this,"lowerCaseFiles",{}),Vt(this,"usedFiles",{}),this._fetch=(null==t?void 0:t.fetch)||fetch;for(let t=0;t<e.length;++t){const n=e[t];this.files[n.name]=n,this.lowerCaseFiles[n.name.toLowerCase()]=n,this.usedFiles[n.name]=!1}this.fetch=this.fetch.bind(this)}async fetch(e,t){if(e.includes("://"))return this._fetch(e,t);const n=this.files[e];if(!n)return new Response(e,{status:400,statusText:"NOT FOUND"});const r=new Headers(null==t?void 0:t.headers).get("Range"),o=r&&/bytes=($1)-($2)/.exec(r);if(o){const t=parseInt(o[1]),r=parseInt(o[2]),i=await n.slice(t,r).arrayBuffer(),s=new Response(i);return Object.defineProperty(s,"url",{value:e}),s}const i=new Response(n);return Object.defineProperty(i,"url",{value:e}),i}async readdir(e){const t=[];for(const e in this.files)t.push(e);return t}async stat(e,t){const n=this.files[e];if(!n)throw new Error(e);return{size:n.size}}async unlink(e){delete this.files[e],delete this.lowerCaseFiles[e],this.usedFiles[e]=!0}async open(e,t,n){return this.files[e]}async read(e,t,n=0,r=t.byteLength,o=null){const i=e;return{bytesRead:r,buffer:await i.slice(0,0+r).arrayBuffer()}}async close(e){}_getFile(e,t){const n=this.files[e]||this.lowerCaseFiles[e];return n&&t&&(this.usedFiles[e]=!0),n}}async function*Kt(e,t={}){const n=new TextDecoder(void 0,t);for await(const t of e)yield"string"==typeof t?t:n.decode(t,{stream:!0})}async function*Zt(e){const t=new TextEncoder;for await(const n of e)yield"string"==typeof n?t.encode(n):n}async function*Xt(e){let t="";for await(const n of e){let e;for(t+=n;(e=t.indexOf("\n"))>=0;){const n=t.slice(0,e+1);t=t.slice(e+1),yield n}}t.length>0&&(yield t)}async function*en(e){let t=1;for await(const n of e)yield{counter:t,line:n},t++}}])}));
//# sourceMappingURL=dist.min.js.map